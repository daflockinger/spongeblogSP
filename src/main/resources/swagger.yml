# this is an example of the Uber API
# as a demonstration of an API spec in YAML
swagger: '2.0'
info:
  title: SpongeblogSP API
  description: Spongeblog blogging API
  version: "1.0.0"
# array of all schemes that your API supports
schemes:
  - https
# will be prefixed to all paths
basePath: /api/v1
consumes:
  - application/json
produces:
  - application/json
parameters:
  PageNumber:
    name: page
    in: query
    description: Page number from that on posts are returned.
    required: false
    type: integer
  PostsPerPage:
    name: size
    in: query
    description: Posts per page. 
    required: false
    type: integer
  Status:
    name: status
    in: path
    description: Post Status Id
    required: true
    type: string
  IdCategory:
    name: category-id
    in: path
    description: Unique identifier of a Category;
    required: true
    type: integer
    format: int64
  IdUser:
    name: user-id
    in: path
    description: Unique identifier of a User;
    required: true
    type: integer
    format: int64
  IdPost:
    name: post-id
    in: path
    description: Unique identifier of a Post;
    required: true
    type: integer
    format: int64
  PostEdit:
    name: post-edit
    in: body
    schema:
      $ref: '#/definitions/PostDTO'
    required: true
  CategoryEdit:
    name: category-edit
    in: body
    schema:
      $ref: '#/definitions/CategoryDTO'
    required: true
  BlogEdit:
    name: blog-edit
    in: body
    schema:
      $ref: '#/definitions/BlogDTO'
    required: true
  TagEdit:
    name: tag-edit
    in: body
    schema:
      $ref: '#/definitions/TagDTO'
    required: true
  UserEdit:
    name: user-edit
    in: body
    schema:
      $ref: '#/definitions/UserEditDTO'
    required: true  
  IdParentCategory:
    name: parent-category-id
    in: path
    description: Unique identifier of the parent Category;
    required: true
    type: integer
    format: int64
  IdTag:
    name: tag-id
    in: path
    description: Unique identifier of a Tag;
    required: true
    type: integer
    format: int64
paths:
  /api/v1/posts:
    get:
      summary: All posts
      description: Returns all posts (paginated).
      parameters:
        - $ref: '#/parameters/PageNumber'
        - $ref: '#/parameters/PostsPerPage'
      tags:
        - Posts
      responses:
        200:
          description: Post links.
          schema:
            description: Link to Post.
            type: array
            items:
              type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    post:
      summary: Create Post
      description: Creates new Post entry.
      parameters:
        - $ref: '#/parameters/PostEdit'
      tags: 
        - Posts
      responses:
        201:
          description: Created Post.
          schema:
            $ref: '#/definitions/PostDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    put:
      summary: Update Post
      description: Updated a Post entry.
      parameters:
        - $ref: '#/parameters/PostEdit'
      tags: 
        - Posts
      responses:
        200:
          description: Post updated.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/posts/status/{status}:
    get:
      summary: Posts with status
      description: Returns all posts with defined status.
      parameters:
        - $ref: '#/parameters/Status'
        - $ref: '#/parameters/PageNumber'
        - $ref: '#/parameters/PostsPerPage'
      tags:
        - Posts
      responses:
        200:
          description: Post links.
          schema:
            description: Link to Post.
            type: array
            items:
              type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/posts/category/{category-id}:
    get:
      summary: Posts from Category
      description: Returns all posts from defined Category.
      parameters:
        - $ref: '#/parameters/IdCategory'
        - $ref: '#/parameters/PageNumber'
        - $ref: '#/parameters/PostsPerPage'
      tags:
        - Posts
      responses:
        200:
          description: Post links.
          schema:
            description: Link to Post.
            type: array
            items:
              type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/posts/category/{category-id}/{status}:
    get:
      summary: Posts from Category and Status
      description: Returns all posts from defined Category and Status.
      parameters:
        - $ref: '#/parameters/IdCategory'
        - $ref: '#/parameters/Status'
        - $ref: '#/parameters/PageNumber'
        - $ref: '#/parameters/PostsPerPage'
      tags:
        - Posts
      responses:
        200:
          description: Post links.
          schema:
            description: Link to Post.
            type: array
            items:
              type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/posts/author/{user-id}:
    get:
      summary: Posts from User
      description: Returns all posts from defined User.
      parameters:
        - $ref: '#/parameters/IdUser'
        - $ref: '#/parameters/PageNumber'
        - $ref: '#/parameters/PostsPerPage'
      tags:
        - Posts
      responses:
        200:
          description: Post links.
          schema:
            description: Link to Post.
            type: array
            items:
              type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/posts/author/{user-id}/{status}:
    get:
      summary: Posts from User and Status
      description: Returns all posts from defined User and Status.
      parameters:
        - $ref: '#/parameters/IdUser'
        - $ref: '#/parameters/Status'
        - $ref: '#/parameters/PageNumber'
        - $ref: '#/parameters/PostsPerPage'
      tags:
        - Posts
      responses:
        200:
          description: Post links.
          schema:
            description: Link to Post.
            type: array
            items:
              type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/posts/{post-id}:
    get:
      summary: Get Post
      description: Fetches Post with defined Id.
      parameters:
        - $ref: '#/parameters/IdPost'
      tags: 
        - Posts
      responses:
        200:
          description: Post with id.
          schema:
            $ref: '#/definitions/PostDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    delete:
      summary: Delete Post
      description: Deletes a Post with defined Id.
      parameters:
        - $ref: '#/parameters/IdPost'
      tags: 
        - Posts
      responses:
        200:
          description: Post deleted.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/posts/rewind/{post-id}:
    put:
      summary: Rewind Post
      description: Restores previous Post entry.
      parameters:
        - $ref: '#/parameters/IdPost'
      tags: 
        - Posts
      responses:
        201:
          description: Previous Post restored.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/categories:
    get:
      summary: All Categorys
      description: Returns all Categorys.
      tags:
        - Categories
      responses:
        200:
          description: Categories.
          schema:
            type: array
            items:
              $ref: '#/definitions/CategoryDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    post:
      summary: Create Category
      description: Creates new Category entry.
      parameters:
        - $ref: '#/parameters/CategoryEdit'
      tags: 
        - Categories
      responses:
        201:
          description: Created Category.
          schema:
            $ref: '#/definitions/CategoryDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    put:
      summary: Update Category
      description: Updated a Category entry.
      parameters:
        - $ref: '#/parameters/CategoryEdit'
      tags: 
        - Categories
      responses:
        200:
          description: Category updated.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/categories/{category-id}:
    get:
      summary: Get Category
      description: Fetches Category with defined Id.
      parameters:
        - $ref: '#/parameters/IdCategory'
      tags: 
        - Categories
      responses:
        200:
          description: Category with id.
          schema:
            $ref: '#/definitions/CategoryPostsDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    delete:
      summary: Delete Category
      description: Deletes a Category with defined Id.
      parameters:
        - $ref: '#/parameters/IdCategory'
      tags: 
        - Categories
      responses:
        200:
          description: Category deleted.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/categories/children/{parent-category-id}:
    get:
      summary: Categorys of Parent.
      description: Returns all Categorys of defined parent Category.
      parameters:
        - $ref: '#/parameters/IdParentCategory'
      tags:
        - Categories
      responses:
        200:
          description: Categories.
          schema:
            type: array
            items:
              $ref: '#/definitions/CategoryPostsDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/categories/rewind/{category-id}:
    put:
      summary: Rewind Category
      description: Restores previous Category entry.
      parameters:
        - $ref: '#/parameters/IdCategory'
      tags: 
        - Categories
      responses:
        201:
          description: Previous Category restored.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/blog:
    post:
      summary: Create Blog
      description: Creates new Blog entry.
      parameters:
        - $ref: '#/parameters/BlogEdit'
      tags: 
        - Blog
      responses:
        201:
          description: Created Blog.
          schema:
            $ref: '#/definitions/BlogDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    put:
      summary: Update Blog
      description: Updated a Blog entry.
      parameters:
        - $ref: '#/parameters/BlogEdit'
      tags: 
        - Blog
      responses:
        200:
          description: Blog updated.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    get:
      summary: Get Blog
      description: Returns the Blog entry.
      tags: 
        - Blog
      responses:
        200:
          description: Blog.
          schema:
            $ref: '#/definitions/BlogDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    delete:
      summary: Delete Blog
      description: Deletes existing Blog.
      tags: 
        - Blog
      responses:
        200:
          description: Blog deleted.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/blog/rewind:
    put:
      summary: Rewind Blog
      description: Restores previous Blog entry.
      tags: 
        - Blog
      responses:
        200:
          description: Previous Blog restored.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/tags:
    get:
      summary: All Tags
      description: Returns all Tags.
      tags:
        - Tags
      responses:
        200:
          description: Tags.
          schema:
            type: array
            items:
              $ref: '#/definitions/TagDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    post:
      summary: Create Tag
      description: Creates new Tag entry.
      parameters:
        - $ref: '#/parameters/TagEdit'
      tags: 
        - Tags
      responses:
        201:
          description: Created Tag.
          schema:
            $ref: '#/definitions/TagDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    put:
      summary: Update Tag
      description: Updated a Tag entry.
      parameters:
        - $ref: '#/parameters/TagEdit'
      tags: 
        - Tags
      responses:
        200:
          description: Tag updated.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/tags/{tag-id}:
    get:
      summary: Get Tag
      description: Fetches Tag with defined Id.
      parameters:
        - $ref: '#/parameters/IdTag'
      tags: 
        - Tags
      responses:
        200:
          description: Tag with id.
          schema:
            $ref: '#/definitions/TagPostsDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    delete:
      summary: Delete Tag
      description: Deletes a Tag with defined Id.
      parameters:
        - $ref: '#/parameters/IdTag'
      tags: 
        - Tags
      responses:
        200:
          description: Tag deleted.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/tags/rewind/{tag-id}:
    put:
      summary: Rewind Tag
      description: Restores previous Tag entry.
      parameters:
        - $ref: '#/parameters/IdTag'
      tags: 
        - Tags
      responses:
        200:
          description: Previous Tag restored.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/users:
    get:
      summary: All Users
      description: Returns all Users.
      tags:
        - Users
      responses:
        200:
          description: Users.
          schema:
            type: array
            items:
              $ref: '#/definitions/UserEditDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    post:
      summary: Create User
      description: Creates new User entry.
      parameters:
        - $ref: '#/parameters/UserEdit'
      tags: 
        - Users
      responses:
        201:
          description: Created User.
          schema:
            $ref: '#/definitions/UserEditDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    put:
      summary: Update User
      description: Updated a User entry.
      parameters:
        - $ref: '#/parameters/UserEdit'
      tags: 
        - Users
      responses:
        200:
          description: User updated.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/users/{user-id}:
    get:
      summary: Get User
      description: Fetches User with defined Id.
      parameters:
        - $ref: '#/parameters/IdUser'
      tags: 
        - Users
      responses:
        200:
          description: User with id.
          schema:
            $ref: '#/definitions/UserEditDTO'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    delete:
      summary: Delete User
      description: Deletes a User with defined Id.
      parameters:
        - $ref: '#/parameters/IdUser'
      tags: 
        - Users
      responses:
        200:
          description: User deleted.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /api/v1/users/rewind/{user-id}:
    put:
      summary: Rewind User
      description: Restores previous User entry.
      parameters:
        - $ref: '#/parameters/IdUser'
      tags: 
        - Users
      responses:
        200:
          description: Previous User restored.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
definitions:
  TagDTO:
    type: object
    properties:
      name:
        type: string
        description: Tag name.
  TagPostsDTO:
    type: object
    properties:
      name:
        type: string
        description: Tag name.
      posts:
        type: string
        description: Link to related Posts.
  CategoryDTO:
    type: object
    properties:
      name:
        type: string
        description: Category display name.
      parentLink:
        type: string
        description: Link to parent Category.
      parentId:
        type: integer
        format: int64
        description: Id of parent Category.
      rank:
        type: integer
        description: Determines position of Category.
  CategoryPostsDTO:
    type: object
    properties:
      name:
        type: string
        description: Category display name.
      parentLink:
        type: string
        description: Link to parent Category.
      parent:
        type: integer
        format: int64
        description: Id of parent Category.
      subCategories:
        description: Links to child Categories.
        type: array
        items:
          type: string
      posts:
        description: Link to posts within category.
        type: string
      rank:
        type: integer
        description: Determines position of Category.
  UserEditDTO:
    type: object
    properties:
      login:
        type: string
        description: Login name of the User.
      password:
        type: string
        description: Password hash of the User.
      nickName:
        type: string
        description: Display nickname of the User.
      email:
        type: string
        description: Email of User.
      registered:
        type: integer
        format: int64
        description: Registration date of User in long.
      roles:
        type: array
        description: Roles of the User (authorizations).
        items:
          type: string
  UserInfoDTO:
    type: object
    properties:
      nickName:
        type: string
        description: Display nickname of the User.
      email:
        type: string
        description: Email of User.
      registered:
        type: integer
        format: int64
        description: Registration date of User in long.
  PostDTO:
    type: object
    properties:
      content:
        type: string
        description: Post text/html content.
      created:
        type: integer
        format: int64
        description: Creation date of Post in long. 
      modified:
        type: integer
        format: int64
        description: Modification date of Post in long.
      status:
        type: string
        description: Display status of the Post.
      author:
        $ref: '#/definitions/UserInfoDTO'
      category:
        $ref: '#/definitions/CategoryDTO'
      tags:
        type: array
        description: Tags of Post.
        items:
          $ref: '#/definitions/TagDTO'
  BlogDTO:
    type: object
    properties:
      name:
        type: string
        description: Name of the Blog.
      status:
        type: string
        description: Status of the Blog. 
      settings:
        type: object
        description: Settings map of the Blog.
        additionalProperties:
          type: array
          items:
            type: string
  Error:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      fields:
        type: string
